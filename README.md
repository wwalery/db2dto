# db2dto

Generate advanced DTO Java class from database

Generated classes based on database metadata (schema) with flexible settings.

Some common settings for generated code:

```json
 "common": {
    "classPrefix": "",
    "classSuffix": "Data",
    "readOnlyFields": ["is_disabled"],
    "packageName": "nurs.db"
  },
```


You have ability to set specific behavior from global sql types:

```json
  "sqlTypes": {
    "cidr": "String",
    "_cidr": "String",
    "_text": "String",
    "_varchar": "String"
  },
```


```json
 "common": {
    "classPrefix": "",
    "classSuffix": "Data",
    "readOnlyFields": ["is_disabled"],
    "packageName": "nurs.db"
  },
```

to specific tables:

```json
  "tables": {
    "test_table_1": {
      "packageName": "dto.test1",
      "interfaces": ["org.wwapp.db2dto.TestInterface"],
```

And fields:

  * add fields, not existing in table:

```json
      "additionalFields": {
        "add_field": "Integer"
      },
```


  * set fields as enums:

```json
      "enumFields": {
        "enum_field": "org.wwapp.db2dto.TestEnum"
      },
```

  * generate toString method for all fields with exceptions:

```json
      "toStringIgnoreFields": [
        "big_field"
      ],
```


  * set some fields as _readOnly__, i.e. without setters:

```json
      "readOnlyFields": [
        "read_only"
      ]
    },
```

  * set specific java type to field (by field name)

```json
      "fieldTypes": {
        "test_array": "org.wwapp.db2dto.TestType"
      }
```



Code generated by predefined templates (Pebble), so, you have ability to use your own templates.

On code, generated with default templates, you have common interface:

```java
public interface IData {
  // check that file changed
  boolean hasChangedField(final String fieldName);
  
  // Any fields changed
  boolean isChanged();
  void resetChangedField(final String fieldName);
  
  // reset fields changing flag
  void resetChanged();
  
  // return all fields 
  Set<String> getFieldNames();
}
```

and each generated class have for all table fields:

  * ability to set _changed_ flag, e.g:

```java
// status_type
  public StatusTypeData setStatusTypeChanged() {
    changedFields.add("status_type");
    return this;
  }
```

  * ability to check if field changed after last read from DB, e.g:
  
```java
  public boolean isStatusTypeChanged() {
    return changedFields.contains("status_type");
  }
```

  * prudent setters with change field property only when it really changed, e.g:
  

```java
  public StatusTypeData setStatusType(final String newValue) {
    if (!java.util.Objects.equals(newValue, statusType)) {
      this.statusType = newValue;
      changedFields.add("status_type");
    }
    return this;
  }
```

  * additional setters for set only non-null value, e.g:
  
```java
  public StatusTypeData setStatusTypeNotNull(final String newValue) {
    if (!java.util.Objects.equals(newValue, statusType) && (newValue != null)) {
      this.statusType = newValue;
      changedFields.add("status_type");
    }
    return this;
  }
```

  * _changed_ state checker for each field, e.g:
  

```java
  public String getStatusType() {
    return this.statusType;
  }
```

